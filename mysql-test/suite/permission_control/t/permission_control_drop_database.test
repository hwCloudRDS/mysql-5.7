USE mysql;
--disable_warnings
DROP TABLE IF EXISTS user_backup;
let $save_sql_mode= `select @@global.sql_mode`;
set sql_mode='';
--enable_warnings
CREATE TABLE user_backup LIKE user;
INSERT INTO user_backup SELECT * FROM user;

CREATE USER 'root1'@'%' IDENTIFIED BY '123456';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, PROCESS, REFERENCES, INDEX, ALTER, SHOW DATABASES, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, TRIGGER ON *.* TO 'root1'@'%' WITH GRANT OPTION;

show variables like 'rds%';

connect(conn1,localhost,root1,123456,mysql);
SHOW TABLES;
--error 1044
DROP DATABASE mysql;
show databases;


connection default;
--disable_warnings
DROP USER root1;
DELETE FROM user;
INSERT INTO user SELECT * FROM user_backup;
DROP TABLE user_backup;
--enable_warnings
eval SET @@global.sql_mode = '$save_sql_mode';
show databases;
